# Todo Admin 페이지 소프트웨어 요구사항 명세서 (SRS)

## 1. 개요 (Introduction)

### 1.1. 목적
본 문서는 'Todo Admin 페이지' 소프트웨어 개발에 필요한 기능적, 비기능적 요구사항을 상세히 기술하는 것을 목적으로 한다. 본 명세서는 개발팀이 설계, 구현, 테스트 단계에서 참고해야 할 공식적인 지침 역할을 한다.

### 1.2. 범위
본 소프트웨어는 기존 'React Todo' 애플리케이션과 연동되는 관리자용 웹 페이지이다. 주요 기능은 Supabase 데이터베이스에 저장된 사용자 및 Todo 데이터를 관리하는 것으로 한정된다.

### 1.3. 주요 용어
- **관리자:** 시스템의 모든 데이터에 접근하고 관리할 권한을 가진 사용자.
- **사용자:** 'React Todo' 애플리케이션의 일반 사용자.
- **Todo:** 사용자가 생성한 할 일 항목.
- **Supabase:** 본 프로젝트에서 사용하는 BaaS(Backend as a Service). 인증, 데이터베이스, API 기능을 제공한다.
- **RLS:** Row Level Security. Supabase에서 데이터 접근 제어를 위해 사용하는 PostgreSQL의 보안 기능.

## 2. 시스템 설명

### 2.1. 시스템 아키텍처
- **프론트엔드:** **React**를 사용한 SPA(Single Page Application)로 개발한다.
- **백엔드 및 데이터베이스:** **Supabase**를 BaaS로 활용한다. 모든 데이터(사용자, Todo)는 Supabase 내의 PostgreSQL 데이터베이스에 저장되며, 데이터 조작은 Supabase의 PostgREST API를 통해 이루어진다.
- **UI/UX:** **Material-UI(MUI)** 를 주 UI 라이브러리로 사용하며, **'Minimal Dashboard'** 무료 템플릿의 구조와 스타일을 기반으로 개발하여 생산성과 UI 일관성을 높인다.

### 2.2. 데이터베이스 스키마
시스템은 `todos`와 `profiles` 테이블을 사용합니다. 사용자 기본 정보는 `auth.users` 테이블을 참조하며, 추가적인 역할 정보는 `profiles` 테이블에 저장됩니다.

**`todos` 테이블:**
```sql
create table public.todos (
  id bigint generated by default as identity not null,
  user_id uuid not null,
  task text null,
  is_completed boolean not null default false,
  inserted_at timestamp with time zone not null default timezone ('utc'::text, now()),
  created_at timestamp with time zone not null default now(),
  constraint todos_pkey primary key (id),
  constraint todos_user_id_fkey foreign KEY (user_id) references auth.users (id) on delete cascade,
  constraint todos_task_check check ((char_length(task) > 0))
) TABLESPACE pg_default;
```
*Note: `on delete cascade`를 `todos_user_id_fkey` 제약조건에 추가하여 `auth.users`에서 사용자가 삭제될 때 관련 `todos` 항목이 자동으로 삭제되도록 설정하는 것을 권장한다.*

## 3. 기능 요구사항 (Functional Requirements)

### 3.1. 인증 (Authentication)
- `REQ-AUTH-001`: 관리자는 **Google 소셜 로그인**을 통해 시스템에 로그인할 수 있어야 한다.
- `REQ-AUTH-002`: 인증 처리는 Supabase의 `auth.signInWithOAuth({ provider: 'google' })` 함수를 사용한다.
- `REQ-AUTH-003`: 로그인 성공 후, 시스템은 해당 사용자가 사전에 정의된 관리자 목록에 포함되어 있는지 확인해야 한다. 인가되지 않은 사용자는 접근이 거부되어야 한다.
- `REQ-AUTH-004`: 로그인하지 않은 사용자가 관리자 페이지의 특정 URL에 직접 접근 시, 로그인 페이지로 리디렉션되어야 한다.

### 3.2. 사용자 관리 (User Management)
- `REQ-USER-001`: 관리자가 로그인에 성공하면, 시스템은 Supabase의 **`auth.users`** 테이블에서 모든 사용자 목록을 조회하여 화면에 표시해야 한다. (`auth.admin.listUsers()` 사용)
- `REQ-USER-002`: 사용자 목록은 테이블 형태로 표시되며, 최소한 사용자의 이메일과 가입일(`created_at`)을 포함해야 한다.
- `REQ-USER-003`: 사용자 목록이 많을 경우를 대비하여, 페이지네이션(Pagination) 기능을 제공해야 한다. 한 페이지에는 20명의 사용자를 표시한다.
- `REQ-USER-004`: 관리자는 사용자 목록에서 특정 사용자를 클릭 시, 해당 사용자의 상세 정보(email, phone, user_metadata, last_sign_in_at 등)를 조회할 수 있어야 한다.
- `REQ-USER-005`: 관리자는 특정 사용자를 시스템에서 영구적으로 삭제할 수 있어야 한다. (`auth.admin.deleteUser()` 사용)
- `REQ-USER-006`: 사용자 삭제 시, 관련된 모든 `todos` 데이터가 함께 삭제되어야 한다. (DB의 `on delete cascade` 기능 활용)

### 3.3. Todo 관리 (Todo Management)
- `REQ-TODO-001`: 관리자가 사용자 목록에서 특정 사용자를 선택하면, 시스템은 해당 사용자의 `user_id`와 일치하는 모든 Todo 항목을 `todos` 테이블에서 조회하여 표시해야 한다.
- `REQ-TODO-002`: Todo 목록은 테이블 형태로 표시되며, 각 항목은 [내용(task), 완료 여부(is_complete), 생성일(inserted_at)] 컬럼을 포함해야 한다.
- `REQ-TODO-003`: 관리자는 Todo 항목의 `task` 내용을 인라인(inline)으로 편집하거나, 별도의 수정 모달(modal)을 통해 수정하고 데이터베이스에 업데이트할 수 있어야 한다.
- `REQ-TODO-004`: 관리자는 Todo 항목의 `is_complete` 상태를 체크박스 토글(toggle)을 통해 변경하고, 변경 사항은 즉시 데이터베이스에 반영되어야 한다.
- `REQ-TODO-005`: 관리자는 특정 Todo 항목을 삭제할 수 있어야 하며, 삭제 시 확인 절차(confirm dialog)를 거쳐야 한다.
- `REQ-TODO-006`: 관리자는 특정 사용자에게 새로운 Todo 항목을 추가할 수 있는 입력 폼과 버튼을 제공받아야 한다.

## 4. 비기능 요구사항 (Non-Functional Requirements)

### 4.1. 성능 (Performance)
- `REQ-PERF-001`: 사용자 목록 및 Todo 목록 조회 API의 응답 시간은 2초를 초과하지 않아야 한다.
- `REQ-PERF-002`: 페이지 로딩 후 초기 렌더링은 3초 이내에 완료되어야 한다.

### 4.2. 보안 (Security)
- `REQ-SEC-001`: Supabase 데이터베이스에 RLS(Row Level Security) 정책을 설정하여, 오직 **사전에 정의된 admin 리스트에 포함된 사용자(email 기준)**만이 모든 사용자의 데이터를 읽고 수정/삭제할 수 있도록 제한해야 한다.
- `REQ-SEC-002`: Supabase Admin API(e.g., `deleteUser`) 호출은 반드시 서버사이드(e.g., Supabase Edge Functions)에서 `service_role` 키를 사용하여 안전하게 이루어져야 한다. 클라이언트에서 직접 호출해서는 안 된다.
- `REQ-SEC-003`: 일반 사용자는 자신의 데이터만 접근 가능해야 하는 기존 정책을 침해하지 않아야 한다.
- `REQ-SEC-004`: 모든 클라이언트-서버 통신은 HTTPS를 통해 암호화되어야 한다. (Supabase 기본 제공)

### 4.3. UI/UX
- `REQ-UI-001`: **'Minimal Dashboard'** 템플릿을 기반으로 반응형 웹 디자인을 적용하여 데스크톱, 태블릿 등 다양한 화면 크기에서 UI가 깨지지 않고 정상적으로 보여야 한다.
- `REQ-UI-002`: 모든 인터랙션(버튼 클릭, 데이터 로딩 등)에 대해 사용자에게 시각적인 피드백(로딩 스피너, 성공/실패 메시지 등)을 제공해야 한다.
- `REQ-UI-003`: 다크 모드/라이트 모드 전환 기능을 제공해야 한다.
